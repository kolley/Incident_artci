// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Table des profil
model Profil {
  id_Profil    String     @id 
  nom_profil   String
  description  String?
  users        User[]  // relation inverse
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model User {
  id_user       Int           @id @default(autoincrement())
  email         String        @unique
  password      String
  nom_user      String
  id_Profil     String?          
  nom_profil        Profil?       @relation(fields: [id_Profil], references: [id_Profil])
  formulaires   Formulaire[]  
  notifications Notification[]
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
}

model Formulaire {
  id_formulaire   Int      @id @default(autoincrement())
  id_user         Int
  user            User     @relation(fields: [id_user], references: [id_user])
  operateur       String
  reference       String?
  intitule        String
  descriptif      String
  zone            String
  localite        String
  communes        String
  abonnesimpactes Int
  typeIncident    String
  noeudsTouches   Int
  impacts         String
  resolution      String
  dateNotification DateTime
  dateDebut       DateTime?
  dateFin         DateTime?
  observation     String?
  etat            String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Notification {
  id_notification Int      @id @default(autoincrement())
  id_user         Int
  user            User     @relation(fields: [id_user], references: [id_user])
  message         String?
  dateMessage     DateTime?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

